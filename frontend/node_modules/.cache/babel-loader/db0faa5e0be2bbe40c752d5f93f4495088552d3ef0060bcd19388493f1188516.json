{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import axiosInstance from'../utils/axios';import{toast}from'react-toastify';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Navbar=()=>{const[user,setUser]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchUser=async()=>{try{const token=localStorage.getItem('token');if(token){const{data}=await axiosInstance.get('/auth/me');setUser(data);}}catch(err){console.error('Failed to fetch user:',err);}};fetchUser();},[]);const handleLogout=()=>{localStorage.removeItem('token');setUser(null);toast.success('Logged out successfully');navigate('/login');};return/*#__PURE__*/_jsx(\"nav\",{className:\"hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto flex justify-between items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-white text-xl font-bold\",children:\"Kazilink\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-x-4\",children:!user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-white hover:text-blue-200\",children:\"Register\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"text-white hover:text-blue-200\",children:\"Login\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"text-white hover:text-blue-200\",children:\"Dashboard\"}),user.role==='client'&&/*#__PURE__*/_jsx(Link,{to:\"/post-task\",className:\"text-white hover:text-blue-200\",children:\"Post a Task\"}),user.role==='youth'&&/*#__PURE__*/_jsx(Link,{to:\"/browse-tasks\",className:\"text-white hover:text-blue-200\",children:\"Browse Tasks\"}),user.role==='admin'&&/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"text-white hover:text-blue-200\",children:\"Admin Panel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"text-white hover:text-blue-200\",children:\"Logout\"})]})})]})});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","axiosInstance","toast","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Navbar","user","setUser","navigate","fetchUser","token","localStorage","getItem","data","get","err","console","error","handleLogout","removeItem","success","className","children","to","role","onClick"],"sources":["C:/Users/Acer/Documents/Kazi_Connect/frontend/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axiosInstance from '../utils/axios';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst Navbar = () => {\r\n  const [user, setUser] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n          const { data } = await axiosInstance.get('/auth/me');\r\n          setUser(data);\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to fetch user:', err);\r\n      }\r\n    };\r\n    fetchUser();\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    setUser(null);\r\n    toast.success('Logged out successfully');\r\n    navigate('/login');\r\n  };\r\n\r\n  return (\r\n    <nav className=\"hidden\">\r\n      <div className=\"container mx-auto flex justify-between items-center\">\r\n        <Link to=\"/\" className=\"text-white text-xl font-bold\">Kazilink</Link>\r\n        <div className=\"space-x-4\">\r\n          {!user ? (\r\n            <>\r\n              <Link to=\"/register\" className=\"text-white hover:text-blue-200\">Register</Link>\r\n              <Link to=\"/login\" className=\"text-white hover:text-blue-200\">Login</Link>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Link to=\"/dashboard\" className=\"text-white hover:text-blue-200\">Dashboard</Link>\r\n              {user.role === 'client' && (\r\n                <Link to=\"/post-task\" className=\"text-white hover:text-blue-200\">Post a Task</Link>\r\n              )}\r\n              {user.role === 'youth' && (\r\n                <Link to=\"/browse-tasks\" className=\"text-white hover:text-blue-200\">Browse Tasks</Link>\r\n              )}\r\n              {user.role === 'admin' && (\r\n                <Link to=\"/admin\" className=\"text-white hover:text-blue-200\">Admin Panel</Link>\r\n              )}\r\n              <button onClick={handleLogout} className=\"text-white hover:text-blue-200\">Logout</button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}