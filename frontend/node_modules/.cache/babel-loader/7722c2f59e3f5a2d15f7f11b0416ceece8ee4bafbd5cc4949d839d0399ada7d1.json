{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useSearchParams}from'react-router-dom';import{toast}from'react-toastify';import axiosInstance from'../utils/axios';import AuthBackground from'../components/AuthBackground';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VerifyEmail=()=>{const navigate=useNavigate();const[searchParams]=useSearchParams();const[isLoading,setIsLoading]=useState(true);const[message,setMessage]=useState('');useEffect(()=>{const verifyEmail=async()=>{const token=searchParams.get('token');if(!token){setMessage('Invalid verification link.');setIsLoading(false);return;}try{const res=await axiosInstance.post('/auth/verify-email',{token});toast.success(res.data.message||'Email verified successfully!');setMessage('Email verified successfully! You can now log in.');setTimeout(()=>navigate('/login'),3000);}catch(err){var _err$response,_err$response$data;console.error('Verification error:',err);const errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Verification failed.';setMessage(errorMessage);toast.error(errorMessage);}finally{setIsLoading(false);}};verifyEmail();},[searchParams,navigate]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen flex items-center justify-center p-4 bg-gray-50\",children:[/*#__PURE__*/_jsx(AuthBackground,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 relative\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Email Verification\"}),isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Verifying your email...\"})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:message})]})]});};export default VerifyEmail;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useSearchParams","toast","axiosInstance","AuthBackground","jsx","_jsx","jsxs","_jsxs","VerifyEmail","navigate","searchParams","isLoading","setIsLoading","message","setMessage","verifyEmail","token","get","res","post","success","data","setTimeout","err","_err$response","_err$response$data","console","error","errorMessage","response","className","children"],"sources":["C:/Users/Acer/Documents/Kazi_Connect/frontend/src/pages/VerifyEmail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport axiosInstance from '../utils/axios';\r\nimport AuthBackground from '../components/AuthBackground';\r\n\r\nconst VerifyEmail = () => {\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const verifyEmail = async () => {\r\n      const token = searchParams.get('token');\r\n      if (!token) {\r\n        setMessage('Invalid verification link.');\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const res = await axiosInstance.post('/auth/verify-email', { token });\r\n        toast.success(res.data.message || 'Email verified successfully!');\r\n        setMessage('Email verified successfully! You can now log in.');\r\n        setTimeout(() => navigate('/login'), 3000);\r\n      } catch (err) {\r\n        console.error('Verification error:', err);\r\n        const errorMessage = err.response?.data?.error || 'Verification failed.';\r\n        setMessage(errorMessage);\r\n        toast.error(errorMessage);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    verifyEmail();\r\n  }, [searchParams, navigate]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center p-4 bg-gray-50\">\r\n      <AuthBackground />\r\n      <div className=\"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 relative\">\r\n        <h2 className=\"text-2xl font-bold mb-4\">Email Verification</h2>\r\n        {isLoading ? (\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n            <p>Verifying your email...</p>\r\n          </div>\r\n        ) : (\r\n          <p className=\"text-gray-600\">{message}</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VerifyEmail;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,eAAe,KAAQ,kBAAkB,CAC/D,OAASC,KAAK,KAAQ,gBAAgB,CACtC,MAAO,CAAAC,aAAa,KAAM,gBAAgB,CAC1C,MAAO,CAAAC,cAAc,KAAM,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1D,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAAAC,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACW,YAAY,CAAC,CAAGV,eAAe,CAAC,CAAC,CACxC,KAAM,CAACW,SAAS,CAAEC,YAAY,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAE1CC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,KAAM,CAAAC,KAAK,CAAGN,YAAY,CAACO,GAAG,CAAC,OAAO,CAAC,CACvC,GAAI,CAACD,KAAK,CAAE,CACVF,UAAU,CAAC,4BAA4B,CAAC,CACxCF,YAAY,CAAC,KAAK,CAAC,CACnB,OACF,CAEA,GAAI,CACF,KAAM,CAAAM,GAAG,CAAG,KAAM,CAAAhB,aAAa,CAACiB,IAAI,CAAC,oBAAoB,CAAE,CAAEH,KAAM,CAAC,CAAC,CACrEf,KAAK,CAACmB,OAAO,CAACF,GAAG,CAACG,IAAI,CAACR,OAAO,EAAI,8BAA8B,CAAC,CACjEC,UAAU,CAAC,kDAAkD,CAAC,CAC9DQ,UAAU,CAAC,IAAMb,QAAQ,CAAC,QAAQ,CAAC,CAAE,IAAI,CAAC,CAC5C,CAAE,MAAOc,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACZC,OAAO,CAACC,KAAK,CAAC,qBAAqB,CAAEJ,GAAG,CAAC,CACzC,KAAM,CAAAK,YAAY,CAAG,EAAAJ,aAAA,CAAAD,GAAG,CAACM,QAAQ,UAAAL,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcH,IAAI,UAAAI,kBAAA,iBAAlBA,kBAAA,CAAoBE,KAAK,GAAI,sBAAsB,CACxEb,UAAU,CAACc,YAAY,CAAC,CACxB3B,KAAK,CAAC0B,KAAK,CAACC,YAAY,CAAC,CAC3B,CAAC,OAAS,CACRhB,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAEDG,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,CAACL,YAAY,CAAED,QAAQ,CAAC,CAAC,CAE5B,mBACEF,KAAA,QAAKuB,SAAS,CAAC,8DAA8D,CAAAC,QAAA,eAC3E1B,IAAA,CAACF,cAAc,GAAE,CAAC,cAClBI,KAAA,QAAKuB,SAAS,CAAC,6DAA6D,CAAAC,QAAA,eAC1E1B,IAAA,OAAIyB,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,oBAAkB,CAAI,CAAC,CAC9DpB,SAAS,cACRJ,KAAA,QAAKuB,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B1B,IAAA,QAAKyB,SAAS,CAAC,6EAA6E,CAAM,CAAC,cACnGzB,IAAA,MAAA0B,QAAA,CAAG,yBAAuB,CAAG,CAAC,EAC3B,CAAC,cAEN1B,IAAA,MAAGyB,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAElB,OAAO,CAAI,CAC1C,EACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAL,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}