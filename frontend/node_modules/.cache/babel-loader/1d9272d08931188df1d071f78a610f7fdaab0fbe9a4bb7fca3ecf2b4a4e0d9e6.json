{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import axiosInstance from'../utils/axios';import{toast}from'react-toastify';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Navbar=()=>{const{user:authUser,signOut}=useAuth();const[user,setUser]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchUser=async()=>{if(authUser){try{const{data}=await axiosInstance.get('/auth/me');setUser(data);}catch(err){console.error('Failed to fetch user:',err);}}else{setUser(null);}};fetchUser();},[authUser]);const handleLogout=async()=>{await signOut();setUser(null);toast.success('Logged out successfully');navigate('/login');};return/*#__PURE__*/_jsx(\"nav\",{className:\"hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto flex justify-between items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-white text-xl font-bold\",children:\"Kazilink\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-x-4\",children:!user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-white hover:text-blue-200\",children:\"Register\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"text-white hover:text-blue-200\",children:\"Login\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"text-white hover:text-blue-200\",children:\"Dashboard\"}),user.role==='client'&&/*#__PURE__*/_jsx(Link,{to:\"/post-task\",className:\"text-white hover:text-blue-200\",children:\"Post a Task\"}),user.role==='youth'&&/*#__PURE__*/_jsx(Link,{to:\"/browse-tasks\",className:\"text-white hover:text-blue-200\",children:\"Browse Tasks\"}),user.role==='admin'&&/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"text-white hover:text-blue-200\",children:\"Admin Panel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"text-white hover:text-blue-200\",children:\"Logout\"})]})})]})});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useAuth","axiosInstance","toast","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Navbar","user","authUser","signOut","setUser","navigate","fetchUser","data","get","err","console","error","handleLogout","success","className","children","to","role","onClick"],"sources":["C:/Users/Acer/Documents/Kazi_Connect/frontend/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport axiosInstance from '../utils/axios';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst Navbar = () => {\r\n  const { user: authUser, signOut } = useAuth();\r\n  const [user, setUser] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      if (authUser) {\r\n        try {\r\n          const { data } = await axiosInstance.get('/auth/me');\r\n          setUser(data);\r\n        } catch (err) {\r\n          console.error('Failed to fetch user:', err);\r\n        }\r\n      } else {\r\n        setUser(null);\r\n      }\r\n    };\r\n    fetchUser();\r\n  }, [authUser]);\r\n\r\n  const handleLogout = async () => {\r\n    await signOut();\r\n    setUser(null);\r\n    toast.success('Logged out successfully');\r\n    navigate('/login');\r\n  };\r\n\r\n  return (\r\n    <nav className=\"hidden\">\r\n      <div className=\"container mx-auto flex justify-between items-center\">\r\n        <Link to=\"/\" className=\"text-white text-xl font-bold\">Kazilink</Link>\r\n        <div className=\"space-x-4\">\r\n          {!user ? (\r\n            <>\r\n              <Link to=\"/register\" className=\"text-white hover:text-blue-200\">Register</Link>\r\n              <Link to=\"/login\" className=\"text-white hover:text-blue-200\">Login</Link>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Link to=\"/dashboard\" className=\"text-white hover:text-blue-200\">Dashboard</Link>\r\n              {user.role === 'client' && (\r\n                <Link to=\"/post-task\" className=\"text-white hover:text-blue-200\">Post a Task</Link>\r\n              )}\r\n              {user.role === 'youth' && (\r\n                <Link to=\"/browse-tasks\" className=\"text-white hover:text-blue-200\">Browse Tasks</Link>\r\n              )}\r\n              {user.role === 'admin' && (\r\n                <Link to=\"/admin\" className=\"text-white hover:text-blue-200\">Admin Panel</Link>\r\n              )}\r\n              <button onClick={handleLogout} className=\"text-white hover:text-blue-200\">Logout</button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}